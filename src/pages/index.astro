---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
---

<!doctype html>
<html lang="de">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body>
		<Header />
		<main>
			<h1 style="text-align:center;margin-top:2em">
				Herzlich Willkommen
			</h1>
			<p style="text-align:center">
				Wer oder was ist Keks Magazin? Hier kannst du mehr über uns erfahren:
			</p>
			<button type="button" onclick="location.href='about'">
				Über uns
			</button>
			<div class="rounded-box">
                <h2 style="text-align:center">
					Artikel
				</h2>
                <p style="text-align:center">
					Hier findest du unsere neuesten Artikel:
				</p>
                <button type="button" onclick="location.href='blog'">
					Artikel
				</button>
            </div>
			<div class="rounded-box">
                <h2 style="text-align:center">
					Umfragen
				</h2>
                <p style="text-align:center">
					Hier findest du unsere neuesten Umfragen:
				</p>
				<p style="text-align:center">
					<a href="https://forms.office.com/r/wpv4FfxgNR">
					Umfrage zur Bundestagswahl 2025
					</a>
				</p>
            </div>
			<div class="rounded-box">
				<script>
					async function fetchRSS() {
						const response = await fetch('https://bsky.app/profile/did:plc:wanv52ef2iwub4r2m7yd5jae/rss');
						const data = await response.text();
						const parser = new DOMParser();
						const xmlDoc = parser.parseFromString(data, "text/xml");
						const items = xmlDoc.getElementsByTagName('item');
						if (items.length > 0) {
							const latestItem = items[0];
							const title = latestItem.getElementsByTagName('title')[0].textContent;
							const link = latestItem.getElementsByTagName('link')[0].textContent;
							document.getElementById('latest-post').innerHTML = `<a href="${link}" target="_blank">${title}</a>`;
						}
					}
			
					window.onload = fetchRSS;
				</script>
				  <h1>Neuster Bluesky Beitrag</h1>
				  <div id="latest-post">Lade...</div>
            </div>
		</main>
		<Footer />
	</body>
</html>



