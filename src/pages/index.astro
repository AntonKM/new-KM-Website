---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
---

<!doctype html>
<html lang="de">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body>
		<Header />
		<main>
			<h1 style="text-align:center;margin-top:2em">
				Herzlich Willkommen
			</h1>
			<p style="text-align:center">
				Wer oder was ist Keks Magazin? Hier kannst du mehr über uns erfahren:
			</p>
			<button type="button" onclick="location.href='about'">
				Über uns
			</button>
			<div class="rounded-box">
                <h2 style="text-align:center">
					Artikel
				</h2>
                <p style="text-align:center">
					Hier findest du unsere neuesten Artikel:
				</p>
                <button type="button" onclick="location.href='blog'">
					Artikel
				</button>
            </div>
			<div class="rounded-box">
                <h2 style="text-align:center">
					Umfragen
				</h2>
                <p style="text-align:center">
					Hier findest du unsere neuesten Umfragen:
				</p>
				<p style="text-align:center">
					<a href="https://forms.office.com/r/wpv4FfxgNR">
					Umfrage zur Bundestagswahl 2025
					</a>
				</p>
            </div>
				<div id="feed">
					<h2>Neuster Beitrag von Bluesky</h2>
					<div id="latest-post"></div>
				</div>
				
				<script>
					const rssUrl = 'https://bsky.app/profile/did:plc:wanv52ef2iwub4r2m7yd5jae/rss'; // Ersetze dies mit deinem RSS-Feed-Link
				
					async function fetchRSS() {
						try {
							const response = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssUrl)}&api_key=YOUR_API_KEY`);
							const data = await response.json();
							if (data.status === 'ok') {
								const latestPost = data.items[0];
								document.getElementById('latest-post').innerHTML = `
									<h3><a href="${latestPost.link}" target="_blank">${latestPost.title}</a></h3>
									<p>${latestPost.description}</p>
								`;
							} else {
								document.getElementById('latest-post').innerText = 'Fehler beim Abrufen des Feeds.';
							}
						} catch (error) {
							console.error('Fehler:', error);
							document.getElementById('latest-post').innerText = 'Fehler beim Abrufen des Feeds.';
						}
					}
				
					fetchRSS();
				</script>
		</main>
		<Footer />
	</body>
</html>



